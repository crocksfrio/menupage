<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Forçar modo claro e prevenir inversão de cores -->
    <meta name="color-scheme" content="light only">
    <meta name="theme-color" content="#f8f9fa">
    <title>Crocks Frio - Menu Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fontes originais que você preferiu -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Importar Dados Externos -->
    <script src="main/menu-data.js"></script>

    <style>
        /* RESET PARA TV - EVITAR MODO NOTURNO */
        html, body {
            background-color: #f8f9fa !important;
            color: #1f2937 !important;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            filter: brightness(1) contrast(1) !important;
            font-family: 'Nunito', sans-serif;
        }

        :root {
            color-scheme: light !important;
        }

        .font-display { font-family: 'Fredoka', sans-serif; }
        
        /* ANIMAÇÃO SIMPLIFICADA */
        .slide-fade {
            animation: fadeIn 0.6s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .price-tag {
            background: linear-gradient(135deg, #2dd4bf 0%, #0f766e 100%) !important;
            color: white !important;
            padding: 4px 14px;
            border-radius: 50px;
            font-weight: 800;
            white-space: nowrap !important;
            display: inline-block;
            font-size: 1.2rem;
        }

        /* IMAGENS DE MÍDIA */
        .media-container img {
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            position: absolute;
            top: 0; 
            left: 0;
            opacity: 0; 
            transition: opacity 1s ease-in-out;
        }
        .media-container img.active { opacity: 1; }

        .pg-card {
            background-color: #78350f !important;
            background-size: cover !important;
            background-position: center !important;
        }

        .text-shadow { text-shadow: 2px 2px 4px rgba(0,0,0,0.6); }

        /* Ajuste de escala para 32" */
        h2 { font-size: 2.8rem !important; line-height: 1.1; }
        .item-title { font-size: 1.4rem; font-weight: 800; }
        .item-desc { font-size: 1rem; color: #6b7280; line-height: 1.2; }
    </style>
</head>
<body class="flex bg-gray-50 overflow-hidden">

    <!-- LADO ESQUERDO: MÍDIA (40%) -->
    <div class="w-[40%] h-full relative bg-black overflow-hidden shadow-2xl z-10 media-container" id="media-container">
        <div class="absolute bottom-0 left-0 w-full h-1/4 bg-gradient-to-t from-black/90 to-transparent z-20"></div>
        <div class="absolute bottom-10 left-10 z-30 text-white">
            <h2 class="font-display font-bold text-teal-400 mb-1 text-shadow">Crocks Frio</h2>
            <p class="text-xl opacity-90 text-shadow">Gelados Artesanais & Café</p>
        </div>
    </div>

    <!-- LADO DIREITO: CARDÁPIO (60%) -->
    <div class="w-[60%] h-full flex flex-col relative bg-white">
        <div class="absolute inset-0 opacity-5 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
        
        <!-- Cabeçalho -->
        <div class="h-[12vh] flex items-center justify-between px-10 border-b border-gray-100 bg-white/95 z-20">
            <div class="flex items-center gap-4">
                <i class="fas fa-ice-cream text-4xl text-teal-500"></i>
                <h1 class="text-3xl font-display font-bold text-gray-800 uppercase tracking-wide">Menu Oficial</h1>
            </div>
            <div class="text-teal-600 font-bold text-xl flex items-center gap-2">
                <i class="fab fa-instagram"></i> @crocksfrio.oficial
            </div>
        </div>

        <!-- Conteúdo Dinâmico -->
        <div class="flex-1 p-10 relative z-10" id="menu-content">
            <div class="flex items-center justify-center h-full text-gray-400 font-display italic animate-pulse">
                Carregando...
            </div>
        </div>

        <!-- Barra de Progresso -->
        <div class="h-2 w-full bg-gray-100 absolute bottom-0 left-0 z-30">
            <div id="progress-bar" class="h-full bg-teal-500 w-0 transition-all duration-[linear]"></div>
        </div>
    </div>

    <script>
        const SLIDE_DURATION = 15000;

        const DEFAULT_DATA = {
            sorvetes: { titulo: "Sorvetes", itens: [], servicos: [] },
            cafeteria: { titulo: "Cafeteria", itens: [] },
            salgados: { titulo: "Salgados", itens: [], destaques: [] },
            doces: { titulo: "Doces", milkshake: {}, petit_gateau: {}, outros: [] }
        };

        function getSafeData() {
            return (typeof MENU_DATA !== 'undefined') ? MENU_DATA : DEFAULT_DATA;
        }

        const contentData = [
            {
                media: [
                    { src: 'main/icecream_1.jpg', fb: 'https://images.unsplash.com/photo-1563805042-7684c019e1cb' },
                    { src: 'main/icecream_2.jpg', fb: 'https://images.unsplash.com/photo-1501443762994-82bd5dace89a' }
                ],
                getHtml: () => {
                    const d = getSafeData().sorvetes;
                    const items = d.itens.map((item, idx) => {
                        const colors = ['teal', 'orange', 'purple', 'pink'];
                        const color = colors[idx % colors.length];
                        const highlight = item.destaque ? `ring-4 ring-teal-50 scale-[1.03] bg-teal-50/20` : `bg-white`;
                        const tag = item.destaque ? `<span class="bg-yellow-400 text-yellow-900 text-[10px] px-2 py-1 rounded-full font-black ml-2 uppercase align-middle">O mais pedido</span>` : '';
                        
                        // Sistema de tamanho de fonte dinâmico
                        const descStyle = item.tamanho_fonte ? `style="font-size: ${item.tamanho_fonte}"` : '';

                        return `
                        <div class="${highlight} p-5 rounded-2xl shadow-lg border-l-8 border-${color}-400 flex flex-col justify-between h-36">
                            <div>
                                <h3 class="item-title text-gray-800 leading-tight uppercase mb-1">${item.nome}${tag}</h3>
                                <p class="item-desc" ${descStyle}>${item.desc}</p>
                            </div>
                            <div class="flex justify-end">
                                <span class="price-tag">R$ ${item.preco}</span>
                            </div>
                        </div>`;
                    }).join('');

                    return `
                    <div class="slide-fade h-full flex flex-col">
                        <h2 class="font-display font-bold text-teal-600 mb-8 border-l-8 border-teal-500 pl-6 uppercase tracking-tighter">${d.titulo}</h2>
                        <div class="grid grid-cols-2 gap-6">${items}</div>
                    </div>`;
                }
            },
            {
                media: [
                    { src: 'main/coffee.jpg', fb: 'https://images.unsplash.com/photo-1497935586351-b67a49e012bf' },
                    { src: 'main/salgado.jpg', fb: 'https://images.unsplash.com/photo-1555507036-ab1f40388085' }
                ],
                getHtml: () => {
                    const data = getSafeData();
                    const cafe = data.cafeteria;
                    const salg = data.salgados;

                    const cafeItems = cafe.itens.map(i => `
                        <div class="flex justify-between items-center bg-white p-4 rounded-xl border-b-2 border-amber-50 shadow-sm">
                            <div class="leading-tight">
                                <span class="text-xl font-bold text-gray-800">${i.nome}</span>
                                <p class="text-sm text-gray-400" ${i.tamanho_fonte ? `style="font-size: ${i.tamanho_fonte}"` : ''}>${i.desc || ''}</p>
                            </div>
                            <span class="text-2xl font-black text-amber-700 ml-4">R$ ${i.preco}</span>
                        </div>
                    `).join('');

                    const salgItems = salg.itens.map(i => `
                        <div class="flex justify-between items-center py-2 border-b border-dashed border-gray-200">
                            <span class="font-bold text-lg text-gray-700">${i.nome}</span>
                            <span class="font-black text-xl text-gray-900 ml-4">R$ ${i.preco}</span>
                        </div>
                    `).join('');

                    return `
                    <div class="slide-fade grid grid-cols-2 gap-10 h-full">
                        <div class="flex flex-col">
                            <h2 class="font-display font-bold text-amber-800 mb-6 border-l-8 border-amber-600 pl-6 uppercase tracking-tighter">${cafe.titulo}</h2>
                            <div class="space-y-3">${cafeItems}</div>
                            <div class="mt-6 bg-green-50 p-3 rounded-xl text-green-700 text-sm font-bold text-center border border-green-100 italic">
                                <i class="fas fa-leaf mr-2"></i> ${cafe.extra}
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <h2 class="font-display font-bold text-orange-600 mb-6 border-l-8 border-orange-500 pl-6 uppercase tracking-tighter">${salg.titulo}</h2>
                            <div class="bg-gray-50/50 p-5 rounded-2xl mb-6 shadow-inner">${salgItems}</div>
                            <div class="space-y-3">
                                ${salg.destaques.map(d => `
                                    <div class="bg-orange-600 text-white p-4 rounded-2xl flex justify-between items-center shadow-lg transform rotate-[-1deg]">
                                        <span class="font-black text-lg uppercase">${d.nome}</span>
                                        <span class="font-black text-2xl">R$ ${d.preco}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>`;
                }
            },
            {
                media: [
                    { src: 'main/dessert_1.jpg', fb: 'https://images.unsplash.com/photo-1572490122747-3968b75cc699' },
                    { src: 'main/dessert_2.jpg', fb: 'https://images.unsplash.com/photo-1606313564200-e75d5e30476d' }
                ],
                getHtml: () => {
                    const doces = getSafeData().doces;
                    const ms = doces.milkshake;
                    const pg = doces.petit_gateau;
                    const pgBg = pg.img_fundo ? `background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('${pg.img_fundo}') !important;` : '';

                    return `
                    <div class="slide-fade h-full flex flex-col">
                        <h2 class="font-display font-bold text-pink-600 mb-8 border-l-8 border-pink-500 pl-6 uppercase tracking-tighter">${doces.titulo}</h2>
                        
                        <div class="grid grid-cols-12 gap-6 mb-8">
                            <div class="col-span-5 bg-pink-50 p-6 rounded-3xl border border-pink-100 shadow-sm">
                                <h3 class="text-2xl font-black text-pink-800 mb-1 uppercase tracking-tight">${ms.titulo}</h3>
                                <p class="text-xs text-pink-400 mb-6 uppercase font-bold tracking-widest">${ms.desc}</p>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm">
                                        <span class="text-sm font-bold text-gray-500 uppercase">${ms.p.tamanho}</span>
                                        <span class="text-2xl font-black text-pink-600">R$ ${ms.p.preco}</span>
                                    </div>
                                    <div class="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm">
                                        <span class="text-sm font-bold text-gray-500 uppercase">${ms.g.tamanho}</span>
                                        <span class="text-2xl font-black text-pink-600">R$ ${ms.g.preco}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-span-7 pg-card rounded-3xl p-8 text-white flex flex-col justify-center relative overflow-hidden shadow-2xl border-4 border-amber-900" style="${pgBg}">
                                <h3 class="text-4xl font-display font-bold text-shadow uppercase mb-2">${pg.titulo}</h3>
                                <p class="text-amber-100 text-sm text-shadow uppercase mb-6 leading-relaxed" ${pg.tamanho_fonte ? `style="font-size: ${pg.tamanho_fonte}"` : ''}>${pg.desc}</p>
                                <div class="text-right">
                                    <span class="text-5xl font-black text-yellow-400 text-shadow">R$ ${pg.preco}</span>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-3 gap-5">
                            ${doces.outros.map(g => `
                                <div class="bg-white p-5 rounded-2xl shadow-md border-t-8 border-${g.cor}-400">
                                    <h4 class="font-black text-sm text-gray-700 uppercase mb-3">${g.titulo}</h4>
                                    ${g.itens ? g.itens.map(i => `<div class="flex justify-between text-xs mb-1.5 border-b border-gray-50 pb-1"><span>${i.nome}</span><span class="font-bold text-gray-900">R$ ${i.preco}</span></div>`).join('') : `<div class="text-right font-black text-2xl text-${g.cor}-600">R$ ${g.preco}</div>`}
                                </div>
                            `).join('')}
                        </div>
                    </div>`;
                }
            }
        ];

        let slideIdx = 0;
        let mediaRotation = null;
        const mediaBox = document.getElementById('media-container');
        const menuBox = document.getElementById('menu-content');
        const pBar = document.getElementById('progress-bar');

        function rotateMedia(list) {
            if (mediaRotation) clearInterval(mediaRotation);
            if (!list || list.length === 0) return;

            const timePerImg = SLIDE_DURATION / list.length;
            let imgIdx = 0;

            const nextImg = () => {
                const item = list[imgIdx];
                const img = document.createElement('img');
                img.src = item.src;
                img.onerror = () => { img.src = item.fb; };
                
                const currentImgs = mediaBox.querySelectorAll('img');
                currentImgs.forEach(i => { if (!i.classList.contains('active')) i.remove(); });

                mediaBox.prepend(img);
                setTimeout(() => {
                    img.classList.add('active');
                    if (currentImgs[0]) currentImgs[0].style.opacity = '0';
                }, 100);

                imgIdx = (imgIdx + 1) % list.length;
            };

            nextImg();
            if (list.length > 1) mediaRotation = setInterval(nextImg, timePerImg);
        }

        function runSlide() {
            const data = contentData[slideIdx];
            menuBox.innerHTML = data.getHtml();

            pBar.style.transition = 'none';
            pBar.style.width = '0%';
            
            setTimeout(() => {
                pBar.style.transition = `width ${SLIDE_DURATION}ms linear`;
                pBar.style.width = '100%';
            }, 100);

            rotateMedia(data.media);
            slideIdx = (slideIdx + 1) % contentData.length;
        }

        window.onload = () => {
            setTimeout(runSlide, 800);
            setInterval(runSlide, SLIDE_DURATION);
        };
    </script>
</body>
</html>