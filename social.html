<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Display - Crocks Frio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="social-config.js"></script>
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f2f5;
            overflow: hidden;
            height: 100vh;
            margin: 0;
        }
        .font-display { font-family: 'Fredoka', sans-serif; }
        
        /* Área do Vídeo 9:16 */
        .video-container {
            width: 40%; /* Ajustado para dar destaque ao vídeo vertical */
            height: 100vh;
            background: #000;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        video {
            height: 100%;
            width: 100%;
            object-fit: cover; /* Preenche a área 9:16 */
        }

        /* Área de Conteúdo à Direita */
        .content-container {
            width: 60%;
            height: 100vh;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(135deg, #ffffff 0%, #f7f9fc 100%);
        }

        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .qr-card {
            background: white;
            padding: 20px;
            border-radius: 24px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            text-align: center;
            border: 2px solid #f0f0f0;
        }
    </style>
</head>
<body class="flex">

    <!-- Lado Esquerdo: Vídeos -->
    <div class="video-container">
        <video id="player" muted playsinline></video>
    </div>

    <!-- Lado Direito: Engajamento -->
    <div class="content-container">
        
        <!-- Cabeçalho -->
        <div class="flex items-center justify-between mb-8">
            <h1 class="text-4xl font-display font-bold text-teal-600">Crocks Frio</h1>
            <div class="text-right">
                <p class="text-gray-400 text-sm font-bold uppercase tracking-widest">Acompanhe nossas novidades</p>
            </div>
        </div>

        <!-- Área Dinâmica (Avaliações ou Redes Sociais) -->
        <div id="dynamic-area" class="flex-grow flex flex-col justify-center">
            <!-- Conteúdo será inserido pelo JS -->
        </div>

        <!-- Rodapé / Progresso -->
        <div class="mt-8 flex justify-between items-end">
            <div>
                <p class="text-gray-500 font-bold mb-1">Nosso Instagram</p>
                <p class="text-3xl font-black text-pink-500" id="insta-handle">@seu_instagram</p>
            </div>
            <div class="w-1/2 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-teal-500 transition-all duration-100" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <script>
        let videoIdx = 0;
        let slideIdx = 0;
        const player = document.getElementById('player');
        const dynamicArea = document.getElementById('dynamic-area');
        const progressBar = document.getElementById('progress-bar');
        const instaHandleText = document.getElementById('insta-handle');

        // Inicializa dados do config
        instaHandleText.innerText = SOCIAL_CONFIG.instagram.handle;

        // Gerenciador de Vídeos
        function playNextVideo() {
            if (SOCIAL_CONFIG.videos.length === 0) return;
            player.src = SOCIAL_CONFIG.videos[videoIdx];
            player.play().catch(e => console.log("Aguardando interação para vídeo"));
            videoIdx = (videoIdx + 1) % SOCIAL_CONFIG.videos.length;
        }

        player.onended = playNextVideo;

        // Gerenciador de Slides da Direita
        function updateRightSlide() {
            const totalSlides = 3; // 0: Avaliação, 1: Instagram QR, 2: Google QR
            let html = '';

            if (slideIdx === 0) {
                // Slide de Avaliação Aleatória
                const aval = SOCIAL_CONFIG.avaliacoes[Math.floor(Math.random() * SOCIAL_CONFIG.avaliacoes.length)];
                let stars = '';
                for(let i=0; i<5; i++) stars += `<i class="fas fa-star ${i < aval.estrelas ? 'text-yellow-400' : 'text-gray-300'}"></i>`;

                html = `
                    <div class="fade-in text-center px-10">
                        <div class="mb-6 text-6xl text-teal-100"><i class="fas fa-quote-left"></i></div>
                        <p class="text-3xl font-bold text-gray-700 italic mb-6">"${aval.texto}"</p>
                        <div class="text-2xl mb-2">${stars}</div>
                        <p class="text-xl font-black text-gray-900 uppercase">— ${aval.nome} (Google Maps)</p>
                    </div>
                `;
            } 
            else if (slideIdx === 1) {
                // Slide Instagram
                const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(SOCIAL_CONFIG.instagram.link)}`;
                html = `
                    <div class="fade-in grid grid-cols-2 gap-8 items-center">
                        <div class="qr-card">
                            <img src="${qrUrl}" alt="QR Instagram" class="mx-auto mb-4 w-64 h-64">
                            <p class="text-sm font-bold text-gray-400">Escaneie para seguir</p>
                        </div>
                        <div>
                            <h2 class="text-5xl font-display font-bold text-pink-500 mb-4">Poste e Marque a gente!</h2>
                            <p class="text-2xl text-gray-600 leading-relaxed">Tire uma foto do seu sorvete, poste nos Stories e marque <span class="font-bold text-pink-600">${SOCIAL_CONFIG.instagram.handle}</span> para aparecer aqui!</p>
                        </div>
                    </div>
                `;
            }
            else {
                // Slide Google Reviews
                const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(SOCIAL_CONFIG.googleReviewLink)}`;
                html = `
                    <div class="fade-in grid grid-cols-2 gap-8 items-center">
                        <div>
                            <h2 class="text-5xl font-display font-bold text-teal-600 mb-4">Gostou da experiência?</h2>
                            <p class="text-2xl text-gray-600 leading-relaxed">Sua avaliação no Google nos ajuda muito! Escaneie o código ao lado e deixe seu comentário.</p>
                        </div>
                        <div class="qr-card">
                            <img src="${qrUrl}" alt="QR Google" class="mx-auto mb-4 w-64 h-64">
                            <p class="text-sm font-bold text-gray-400">Avalie-nos no Google</p>
                        </div>
                    </div>
                `;
            }

            dynamicArea.innerHTML = html;
            
            // Reinicia barra de progresso
            progressBar.style.transition = 'none';
            progressBar.style.width = '0%';
            setTimeout(() => {
                progressBar.style.transition = `width ${SOCIAL_CONFIG.tempoSlideAvaliacao}ms linear`;
                progressBar.style.width = '100%';
            }, 50);

            slideIdx = (slideIdx + 1) % 3;
        }

        // Início
        window.onload = () => {
            playNextVideo();
            updateRightSlide();
            setInterval(updateRightSlide, SOCIAL_CONFIG.tempoSlideAvaliacao);
        };
    </script>
</body>
</html>